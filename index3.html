<!DOCTYPE html>
<html>
<title>Whisper</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/png" href="images/icons/favicon.png"/>
<link rel="stylesheet" href="css/style1.css">
<link rel="stylesheet" href="css/style2.css">
<link rel="stylesheet" href="css/style3.css">
<link rel="stylesheet" href="css/style4.css">
<link rel="stylesheet" href="css/style5 infos.css">
<style>
html,body,h1,h2,h3,h4,h5 {font-family: "Open Sans", sans-serif}
</style>

<link rel="manifest" href="manifest.json"/>
<script src="blockstack.js" >
</script>

<script language = "javascript" type = "text/javascript"  >
 
 function sigout() {
   blockstack.signUserOut(window.location.href='https://yahiayaya7.github.io/blockstack/home')
 
 }
  

 function issigin()
 { if (blockstack.isUserSignedIn()) { document.getElementById("state").innerHTML ='signed ok';
            var statusImage = document.createElement("img");
            statusImage.src ="images/public.png";
            statusImage.style="height:15px;width:15px;";

            var status = document.getElementById("status");
            status.appendChild(statusImage);
            document.getElementById("status").innerHTML =statusImage;

 
 }
  else{ document.getElementById("state").innerHTML ='not signed'; }
  if (blockstack.isUserSignedIn()) {
  
  const userData = blockstack.loadUserData()
   showProfile(userData.profile)
  
   document.getElementById("state").innerHTML =userData.username;
 } else if (blockstack.isSignInPending()) {
   blockstack.handlePendingSignIn()
   .then(userData => {
     showProfile(userData.profile)
   })
 }
 }
	
//******************************************************** SHOW ID ******************************************************
    function showid() {
       if (blockstack.isUserSignedIn()) {
  const userData = blockstack.loadUserData()
   //showid(userData.profile)
  
   document.getElementById("showid").innerHTML =userData.username;
 }
   var person = new blockstack.Person(userData);
   //document.getElementById("showid").innerHTML =person.name();

 }

 //******************************************************** PROFILE ******************************************************
 async function profileinfo(){
    try{
         var name = document.getElementById("name").value;
         var birthday = document.getElementById("birthday").value;
         var male = document.getElementById("male").checked;
         var female = document.getElementById("female").checked;
         var nameprofileindex='Profil_index';
         var gender = '';
    
    if (male.toString() == 'true'){
      gender = 'Male';}
    else if (female.toString() == 'true'){
      gender = 'Female';}
    else {gender = 'Not defined';}
      
    var profile = name.toString() +'X'+ birthday.toString() +'X'+ gender;
    //var profile = name.toString() +'X'+ '22 August 1995' +'X'+ gender;
    
    blockstack.putFile(nameprofileindex, profile, {encrypt: false });
    }
     
         catch(err){
alert(err.message);}
  
  }

//******************************************************** SHOW PROFILE ******************************************************
  async function showInfo() {
   //var person = new blockstack.Person(profile)
   //document.getElementById("nom").innerHTML =person.name();
   //document.getElementById("avatar-image").setAttribute('src', person.avatarUrl());
   try{
    var profil = await blockstack.getFile('Profil_index', {decrypt: false });


    if(profil == null){
      fullname = '« Missing information »';
      birthday = '« Missing information »';
      gender = '« Missing information »';
    }

    else{
    var profile = profil.toString().split('X');
    var fullname = profile[0];
    var birthday = profile[1].toString();
    var gender = profile[2];
    }

    document.getElementById("fullname").innerHTML= fullname;
    document.getElementById("birthday1").innerHTML= birthday;
    document.getElementById("gender").innerHTML= gender;




    }
     
         catch(err){
alert(err.message);}
  
  }


  function showProfile(profile) {
   var person = new blockstack.Person(profile)
   
   document.getElementById("nom").innerHTML =person.name();
   document.getElementById("avatar-image").setAttribute('src', person.avatarUrl());
 }
  
  //******************************************************** SHARE TO A GROUP ******************************************************
 async function sharegroup(){
    try{ 
         var tpost=document.getElementById("postshare").value;
         var public = document.getElementById("public").checked;
         var private = document.getElementById("private").checked;
         var d=new Date;
         var dd = d.getFullYear().toString()+("0" + ((d.getMonth() +1).toString())).slice(-2)+("0" + (d.getDate().toString())).slice(-2)+("0" + (d.getHours().toString())).slice(-2)+("0" + (d.getMinutes().toString())).slice(-2)+("0" + (d.getSeconds().toString())).slice(-2);
         
             

    if (public.toString() == 'true'){
      var filenamepub='PUBLIC_'+dd;
      blockstack.putFile(filenamepub, tpost, {encrypt: false});
      //document.getElementById("turl").innerHTML=await blockstack.getFileUrl(filenamepub, {encrypt: false});
      
     /*{  var listoffilespub='';
      var filenamepubindex='PUB_index';
  blockstack.listFiles((filename)=>{listoffilespub=listoffilespub+filename+'X';
   var strpub = listoffilespub.toString();
      var listpostpub = strpub.split('X');
      var i;
      var str1='';
for (i = 0; i < listpostpub.length; i++) {
  var postpub = listpostpub[i];
        if (postpub[3] =='L') {
          str1 = str1 + listpostpub[i] + 'X';
          }
} */
    var filenamepubindex='PUB_index';
    var str1 = await blockstack.getFile(filenamepubindex, {decrypt: false });
    if(str1 == null){
      var pubindex = filenamepub; 
    }
    else{
      var pubindex = str1 + 'X' + filenamepub;
    }



    
     setTimeout(blockstack.putFile(filenamepubindex, pubindex, {encrypt: false }) , 100);
    //document.getElementById("global").innerHTML=pubindex                       
        // return true})}
     
    }
      
    else if (private.toString() == 'true'){
      var filenamepriv='PRIVATE_'+dd;
      blockstack.putFile(filenamepriv, tpost, {encrypt: true});
      //document.getElementById("turl").innerHTML=await blockstack.getFileUrl(filenamepriv, {encrypt: true});
      
         {  var listoffilespriv='';
      var filenameprivindex='PRIV_index';
  blockstack.listFiles((filename)=>{listoffilespriv=listoffilespriv+filename+'X';
   var strpriv = listoffilespriv.toString();
      var listpostpriv = strpriv.split('X');
      var j;
      var str2='';
for (j = 0; j < listpostpriv.length; j++) {
  var postpriv = listpostpriv[j];
        if (postpriv[4] =='A') {
          str2 = str2 + listpostpriv[j] + 'X';
          }
}   
    var privindex = str2 + filenamepriv; 
    setTimeout(blockstack.putFile(filenameprivindex, privindex, {encrypt: true }) , 100);
    //document.getElementById("global").innerHTML=pubindex                       
         return true})}
    } 
    var pubs = document.getElementById('pubs');
    var child = pubs.lastElementChild;  
        while (child) { 
            pubs.removeChild(child); 
            child = pubs.lastElementChild;
        }
        //setTimeout(location.reload() , 1000);
        setTimeout(function(){
        window.location.reload(1);
        }, 2500);
        

    }
         catch(err){
alert(err.message);}
  
  }

  
  
   //******************************************************** SHOW CONTENT ****************************************************** 
   async function pubcontent(){ 
     
  var p1='PUB_index';
  var p2='PRIV_index';
  try{var t1= await blockstack.getFile(p1, {decrypt: false });
      var t2= await blockstack.getFile(p2, {decrypt: true });
      var listpost1 = t1.split('X');
      var listpost2 = t2.split('X');
      var listposttout = t1 + 'X' + t2;
      
      var listpost = listposttout.split('X');
      var i;
      var str='';
      //var listpost='';
      var x='';
      var j;

      /*for (i = 0; i < listposts.length-1; i++) {
        var post1 = listposts[i];
        var post2 = listposts[i+1];
        var post1str = post1.toString();
        var post2str = post2.toString();
        var post1slice = post1str.slice(-14);
        var post2slice = post2str.slice(-14);
        var post1int = parseInt(post1slice);
        var post2int = parseInt(post2slice);
        parseInt(listposts[i].toString().slice(-14))
        j=i;

        if( post1int <= post2int){
          listpost = listpost + listposts[i] + ';;';
        }
        else{
          listpost = listpost + listposts[i+1] + ';;';
        }
      }
      listpost = listpost.slice(0,-2).split(';;');
      document.getElementById("test1").innerHTML=listpost;*/
      for (i = listpost.length-1; i >= 0; i--) {
        str='';
        pub=listpost[i].toString();
        //document.getElementById("test1").innerHTML=pub;
      
      if( pub[5]=='C' ){
        var x1= await blockstack.getFile(listpost[i], {decrypt: false });
        x=x1;
      }
      else if( pub[5]=='T' ){
        var x2= await blockstack.getFile(listpost[i], {decrypt: true});
        x=x2;
      }

      if(x==null){
        str=str;
        }
        else{
          str = x;
          var pubDiv = document.createElement("div");
          var image = document.createElement("img");
          image.src = "images/avatar3.png";
          image.className ="w3-left w3-circle";
          image.style ="width:60px;margin-top:10px;";
          
          var span = document.createElement("span");
          span.className="w3-right w3-opacity w3-margin-top";
            var year = listpost[i].slice(-14,-10);
            var month = listpost[i].slice(-10,-8);
            var day = listpost[i].slice(-8,-6);
            var hour = listpost[i].slice(-6,-4);
            var min = listpost[i].slice(-4,-2);
            var sec = listpost[i].slice(-2);
            var date = day + '/' + month + '/' + year + '  ' + hour + ':' + min + ':' + sec
		      span.textContent=date;

          var line = document.createElement("hr");
       //   line.className="w3-clear";
       line.style="margin-top:80px; margin-bottom:10px;";

       var line2 = document.createElement("hr");
       //   line.className="w3-clear";
       line2.style="margin-top:10px; margin-bottom:5px;";

		
          var likeButton = document.createElement("button");
          likeButton.className="w3-button w3-margin-bottom ";
          likeButton.style="color :white;";
          likeButton.title="Like";

            var likeImage = document.createElement("img");
            likeImage.src ="images/like.png";
            likeImage.style="height:21px;width:21px;";

        

          var commentButton = document.createElement("button");
          commentButton.className="w3-button w3-margin-bottom";
          commentButton.style = "color : white;margin-left:5px;";
          commentButton.title="Comment";

            var commentImage = document.createElement("img");
              commentImage.src ="images/comment.png";
              commentImage.style="height:21px;width:21px;";


       
          var deleteButton = document.createElement("button");
          deleteButton.className="w3-button w3-margin-bottom w3-right";
          deleteButton.style="color :white;";
          deleteButton.title="delete";
          var dlt = listpost[i]
          deleteButton.id = dlt;
         // deleteButton.setAttribute('onclick','deletef()') ;
         //deleteButton.onclick = deletef(dlt);


            var deleteImage = document.createElement("img");
            deleteImage.src ="images/delete.png";
            deleteImage.style="height:21px;width:21px;";


            var publicImage = document.createElement("img");
            
            

            if( pub[5]=='C' ){
              publicImage.src ="images/public.png";
              publicImage.style="height:19px;width:19px; margin-left:9px;";
              publicImage.className="w3-right w3-margin-top";
              publicImage.title="public";
            }
            else if( pub[5]=='T' ){
              publicImage.src ="images/private.png";
              publicImage.style="height:24px;width:24px; margin-left:5px; margin-top:13px;";
              publicImage.className="w3-right";
              publicImage.title="private";
            }



               
                


              likeButton.appendChild(likeImage);
              
              commentButton.appendChild(commentImage);

              deleteButton.appendChild(deleteImage);
             
            
              var container = document.getElementById("pubs");
              var name = document.createElement("span");
              name.className="w3-left";
              name.style="margin-top:22px; margin-left:15px;font-size:25px;font-family:'century gothic';";
              var profil = await blockstack.getFile('Profil_index', {decrypt: false });
              if(profil == null){
                fullname = 'Username';
              }
              else{
              var profile = profil.toString().split('X');
              //document.getElementById("fullname").innerHTML= profile[0];
              fullname = profile[0];
              }
              name.textContent = fullname;
              

          pubDiv.className="w3-container w3-card w3-white w3-round w3-margin";

          var content = document.createElement("p");
          
            content.style="width : 100%; border : 1 px solid black";
          content.textContent=str;
          
          


          pubDiv.appendChild(image);
		      pubDiv.appendChild(name);
          pubDiv.appendChild(publicImage);
          pubDiv.appendChild(span);
          
           pubDiv.appendChild(line);
          
          pubDiv.appendChild(content);
          pubDiv.appendChild(line2);
          pubDiv.appendChild(likeButton);
          
          pubDiv.appendChild(commentButton);
          pubDiv.appendChild(deleteButton);
          
        
        

        
          
          container.appendChild(pubDiv);

          //document.body.appendChild(container);


        }
        
        }
        
        }
    catch(err){
     alert(err.message);}
     }

     pubcontent();
  
   //******************************************************** SHOW PRIVATE CONTENT ****************************************************** 
   async function privcontent(){ 
     
  var p='PRIV_index';
  try{var t= await blockstack.getFile(p, {decrypt: true });
      var listpost = t.split('X');
      var i;
      var str='';
for (i = 0; i < listpost.length; i++) {
  var x= await blockstack.getFile(listpost[i], {decrypt: true });
  if(x==null){str=str;}
  else{str += listpost[i] +"==>"+ x + "<br>";}
}
   document.getElementById("privcontent").innerHTML=str;
   //document.getElementById("global").innerHTML=t;  
        }
    catch(err){
     alert(err.message);}
     }


//******************************************************** FOLLOW ******************************************************
async function addfollow() {
    var addfollow=document.getElementById("addfollow").value;
    var followindex= 'MyFollowed_index';
    try{ 
          var followindexcont= await blockstack.getFile(followindex, {decrypt: true });
          var str = addfollow +  '</br>';
          if(followindexcont == null){
            var strfollow = str; 
          }
          else{
            var strfollow = followindexcont.toString() + str; 
          }


          blockstack.putFile(followindex, strfollow, {encrypt: true});
          document.getElementById("followadded").innerHTML = 'Followed with succes';
       }
        catch(err){
     alert(err.message);}
}


//******************************************************** SHOW FOLLOWED ******************************************************
async function showfollow() {

    var followindex= 'MyFollowed_index';
    try{ 
          var followindexcont= await blockstack.getFile(followindex, {decrypt: true });

          if(followindexcont == null){
            document.getElementById("showfollow").innerHTML = 'No followed yet'; 
          }
          else{
            var strfollow = followindexcont.split('</br>');
            var i;
            for(i=0; i < strfollow.length; i++){
              var id = strfollow[i].toString();
              var idcontent = document.createElement("p");
              idcontent.textContent=id;

              var container = document.getElementById("showfollow");
              container.appendChild(idcontent);



            }

          }


        }
        catch(err){
     alert(err.message);}
}



//******************************************************** CREATE A GROUP ******************************************************
async function creategroup() {
   
    
   var length = 10;
   var groupkey           = '';
   var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
   var charactersLength = characters.length;
     for ( var i = 0; i < length; i++ ) {
        groupkey += characters.charAt(Math.floor(Math.random() * charactersLength));
     }
    
    var groupname=document.getElementById("groupname").value;
    var groupindex= 'GROUP_index';
    try{ 
          var groupindexcont= await blockstack.getFile(groupindex, {decrypt: true });
          var str = groupname +'XX'+ groupkey + '</br>';
          if(groupindexcont == null){
            var strgroup = str; 
          }
          else{
            var strgroup = groupindexcont.toString() + str; 
          }


          blockstack.putFile(groupindex, strgroup, {encrypt: true});
          var showkey = 'Your group key: ' + groupkey;
          document.getElementById("groupkey").innerHTML = showkey;
       }
        catch(err){
     alert(err.message);}
}


//******************************************************** ADD A GROUP ******************************************************
async function addgroup() {
    var addgroupname=document.getElementById("addgroupname").value;
    var addgroupkey=document.getElementById("addgroupkey").value;
    var addidowner=document.getElementById("addidowner").value;
    var groupindex= 'ADD_GROUP_index';
    try{ 
          var groupindexcont= await blockstack.getFile(groupindex, {decrypt: true });
          var str = addgroupname +'XX'+ addgroupkey + 'XX' + addidowner + '</br>';
          if(groupindexcont == null){
            var strgroup = str; 
          }
          else{
            var strgroup = groupindexcont.toString() + str; 
          }


          blockstack.putFile(groupindex, strgroup, {encrypt: true});
          document.getElementById("groupadded").innerHTML = 'Group added with succes';
       }
        catch(err){
     alert(err.message);}
}
  

//******************************************************** SHOW GROUP LIST ******************************************************
async function showgroups() {

var groupindex= 'GROUP_index';
var addgroupindex= 'ADD_GROUP_index';
try{ 
      var groupindexcont= await blockstack.getFile(groupindex, {decrypt: true });
      var addgroupindexcont= await blockstack.getFile(addgroupindex, {decrypt: true });

      if(groupindexcont == null || addgroupindexcont == null){
        document.getElementById("showgroups").innerHTML = 'No existing groups'; 
      }
      else{
        var i;
        var container = document.getElementById("showgroups");

        if(groupindexcont != null){
          var strgroup = groupindexcont.split('</br>');  
          var mygroups = document.createElement("p");
          mygroups.textContent="My own groups :";
          mygroups.style = "text-align: center;color: #4CAF50;font-weight: bold;"
          container.appendChild(mygroups);

          for(i=0; i < strgroup.length; i++){
            var group1 = strgroup[i].toString();
            var groupsp = group1.split('XX');
            var group = groupsp[0];
            var groupcontent = document.createElement("p");
            
            groupcontent.textContent=group;

            container.appendChild(groupcontent);
          }
        }
        
        if(addgroupindexcont != null){
          var straddgroup = addgroupindexcont.split('</br>');  
          var myaddgroups = document.createElement("p");
          myaddgroups.textContent="My added groups :";
          myaddgroups.style = "text-align: center;color: #4CAF50;font-weight: bold;"
          container.appendChild(myaddgroups);

          for(i=0; i < straddgroup.length; i++){
            var addgroup1 = straddgroup[i].toString();
            var addgroupsp = addgroup1.split('XX');
            var addgroup = addgroupsp[0];
            var addgroupcontent = document.createElement("p");
            
            addgroupcontent.textContent=addgroup;

            container.appendChild(addgroupcontent);
          }
        }

      }


    }
    catch(err){
 alert(err.message);}
}



 
//******************************************************** LIST FILES ****************************************************** 
 function listf(){ var listoffiles=' ';
                  document.getElementById("note").innerHTML='display outstanding'    
  blockstack.listFiles((filename)=>{listoffiles=listoffiles+'<br/>'+filename;
   //document.write(filename)
 
    document.getElementById("note").innerHTML=listoffiles
         return true}     )           
                  
  }
  
 
//******************************************************** DELETE A POST ******************************************************
 function deletef(id){
  // var del = document.getElementById(listpost);
  //var filetodelete=document.getElementById(dlt).value;
  try{ blockstack.deleteFile(id,{wasSigned: false})}
 catch(err){alert(err.message);}
 }
  
 
 //******************************************************** OTHER CONTENT ****************************************************** 
   async function othercontent(){ 
    
    var pubs = document.getElementById('pubs');
    var child = pubs.lastElementChild;  
        while (child) { 
            pubs.removeChild(child); 
            child = pubs.lastElementChild;
        }

    
  var p='PUB_index';
  var id=document.getElementById("idother").value;
  try{var t= await blockstack.getFile(p, { username: id, decrypt: false });
      //var str = t.toString();
      var listpost = t.split('X');
      //var listpost = t.split(/\n/);
      var i;
      var str='';
      //for (i = 0; i < listpost.length; i++) {
      for (i = listpost.length-1; i >= 0; i--) {
        var x= await blockstack.getFile(listpost[i], { username: id, decrypt: false });
        if(x==null){str=str;}
        else{
      
        str = x;
          var pubDiv = document.createElement("div");
          var image = document.createElement("img");
          image.src = "images/avatar2.png";
          image.className ="w3-left w3-circle";
          image.style ="width:60px;margin-top:10px;";
          
          var span = document.createElement("span");
          span.className="w3-right w3-opacity w3-margin-top";
            var year = listpost[i].slice(-14,-10);
            var month = listpost[i].slice(-10,-8);
            var day = listpost[i].slice(-8,-6);
            var hour = listpost[i].slice(-6,-4);
            var min = listpost[i].slice(-4,-2);
            var sec = listpost[i].slice(-2);
            var date = day + '/' + month + '/' + year + '  ' + hour + ':' + min + ':' + sec
		      span.textContent=date;

          var line = document.createElement("hr");
       //   line.className="w3-clear";
       line.style="margin-top:80px; margin-bottom:10px;";

       var line2 = document.createElement("hr");
       //   line.className="w3-clear";
       line2.style="margin-top:10px; margin-bottom:5px;";

		
          var likeButton = document.createElement("button");
          likeButton.className="w3-button w3-margin-bottom ";
          likeButton.style="color :white;";
          likeButton.title="Like";

            var likeImage = document.createElement("img");
            likeImage.src ="images/like.png";
            likeImage.style="height:21px;width:21px;";

        

          var commentButton = document.createElement("button");
          commentButton.className="w3-button w3-margin-bottom";
          commentButton.style = "color : white;margin-left:5px;";
          commentButton.title="Comment";

            var commentImage = document.createElement("img");
              commentImage.src ="images/comment.png";
              commentImage.style="height:21px;width:21px;";


            var publicImage = document.createElement("img");
              publicImage.src ="images/public.png";
              publicImage.style="height:19px;width:19px; margin-left:9px;";
              publicImage.className="w3-right w3-margin-top";
              publicImage.title="public";

              likeButton.appendChild(likeImage);
              commentButton.appendChild(commentImage);
             
            
              var container = document.getElementById("pubs");
              var name = document.createElement("span");
              name.className="w3-left";
              name.style="margin-top:22px; margin-left:15px;font-size:25px;font-family:'century gothic';";
              var profil = await blockstack.getFile('Profil_index', { username: id, decrypt: false });
              if(profil == null){
                fullname = 'Username';
              }
              else{
              var profile = profil.toString().split('X');
              //document.getElementById("fullname").innerHTML= profile[0];
              fullname = profile[0];
              }
              name.textContent = fullname;
              

          pubDiv.className="w3-container w3-card w3-white w3-round w3-margin";

          var content = document.createElement("p");
          
            content.style="width : 100%; border : 1 px solid black";
          content.textContent=str;


          pubDiv.appendChild(image);
		      pubDiv.appendChild(name);
          pubDiv.appendChild(publicImage);
          pubDiv.appendChild(span);
          
           pubDiv.appendChild(line);
          
          pubDiv.appendChild(content);
          pubDiv.appendChild(line2);
          pubDiv.appendChild(likeButton);
          
          pubDiv.appendChild(commentButton);
          
        
          
          container.appendChild(pubDiv);



      
      }
  }

        }
    catch(err){
     alert(err.message);}
     }
     
     
 async function showof(){ 
  
  var p=document.getElementById("posttoshowo").value;
  var id=document.getElementById("idother").value;
  try{var t= await blockstack.getFile(p, { username: id, decrypt: false });
   document.getElementById("posteo").innerHTML=t;
        }
    catch(err){
     alert(err.message);}
}
 function affiche(){
  let options = {
  encrypt: false
}
try{document.getElementById("note").innerHTML='bbbb';}
catch(err){
     alert(err.message);}
 }
 
</script>


<body class="w3-theme-l5">

<!-- Navbar -->
<div class="w3-top">
 <div class="w3-bar w3-theme-d2 w3-left-align w3-large">
  <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-theme-d2" href="javascript:void(0);" onclick="openNav()"><i></i></a>
  <a href="https://yahiayaya7.github.io/blockstack/index.html" class="w3-bar-item  w3-padding-large "><i></i> <img src="images/icons/logo.png" style="height:32px;width:110px"> </a>
  <a href="https://yahiayaya7.github.io/blockstack/index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large" title="Home"><i><img src="images/home.png" style="height:27px;width:27px"></i></a>

  <a href="https://yahiayaya7.github.io/blockstack/index2.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large" title="Followed content"><i><img src="images/amis.png" style="height:27px;width:27px"></i></a>
  <a href="https://yahiayaya7.github.io/blockstack/index3.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large" title="Group content"><i><img src="images/group.png" style="height:27px;width:27px"></i></a>

  <a onclick="document.getElementById('id01').style.display='block'" class="w3-bar-item w3-button w3-hide-small w3-padding-large" title="Account Settings"><i> <img src="images/settings.png" style="height:27px;width:27px"> </i></a>
  <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large" title="Messages"><i><img src="images/msg.png" style="height:27px;width:27px"></i></a>
  <div class="w3-dropdown-hover w3-hide-small">
    <button class="w3-button w3-padding-large" title="Notifications"><img src="images/notif.png" style="height:27px;width:27px"><i></i><span class="w3-badge w3-right w3-small w3-green">3</span></button>     
    <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
      <a href="#" class="w3-bar-item w3-button">first notif</a>
      <a href="#" class="w3-bar-item w3-button">seconde notif</a>
      <a href="#" class="w3-bar-item w3-button">third</a>
    </div>
  </div>

  <a onclick="document.getElementById('id01').style.display='block'" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" title="My Account">
    <img src="images/avatar3.png" class="w3-circle" style="height:30px;width:30px" alt="Avatar">
  </a>

  

  <a class="w3-right">
  <input class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" align="center" type="button" value="sign out" id="sout" onclick="sigout();" />
  </a>
  <a class="w3-right">
  <input class="w3-bar-item w3-button w3-hide-small w3-padding-large" style="height:50px;width:250px;" type="text" class="form-control" placeholder="search">
  </a>
<!--
  <a id="state" class="w3-right w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" align="center">
    <script>issigin();</script>
   </a>  -->

 </div>
</div>

<!-- Navbar on small screens -->
<div id="navDemo" class="w3-bar-block w3-theme-d2 w3-hide w3-hide-large w3-hide-medium w3-large">
  <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 1</a>
  <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 2</a>
  <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 3</a>
  <a href="#" class="w3-bar-item w3-button w3-padding-large">My Profile</a>
</div>

<!-- Informations profile -->
<div id="id01" class="modal">
  <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
  <div class="modal-contentinfo">
    <div class="containerinfo w3-card">
      <h1>Your informations</h1>
      <p>Please fill in this form to complete your profile informations</p>
      <hr class="hrinfo">
      <label for="email"><b>Full name :</b></label>
      <input class="inputinfo w3-card" type="text" id="name" placeholder="Enter your first and last name" name="info" maxlength="30" required>

      <label for="email"><b>Birthday :</b></label><br/>
      <input class="inputinfo w3-card" type="date" id="birthday" name="info" required><br/><br/>

      <label for="email"><b>Gender :</b></label><br/>
      <input class="inputinfo" type="radio" id="male" name="gender" value="male" /> Male
      <input class="inputinfo" type="radio" id="female" name="gender" value="female" /> Female
  <br/><br/>


      <div class="clearfix">
        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn buttoninfo">Cancel</button>
        <button type="button" name="info" id="profile" onclick="profileinfo();" style="background-color: #4CAF50;color: white;padding: 14px 20px;margin: 8px 0;border: none;cursor: pointer;width: 100%;opacity: 0.9;float: left;width: 50%;" class="signupbtn buttoninfo">Save</button>
      </div>
    </div>
  </div>
</div>

<script>
  // Get the modal
  var modal = document.getElementById('id01');
  
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
  </script>




<!-- Page Container -->
<div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">    
  <!-- The Grid -->
  <div class="w3-row">
    <!-- Left Column -->
    <div class="w3-col m3">
      <!-- Profile -->
      <div class="w3-card w3-round w3-white">
        <div class="w3-container">
         <p id="status"></p> <h4 class="w3-center">My Profile</h4>
         <p class="w3-center"><img src="images/avatar3.png" class="w3-circle" style="height:106px;width:106px" alt="Avatar"></p>
         <hr>
        <div style="margin-top: 13px;"> <img src="images/id.png"  style="height:21px;width:21px;display:inline;"> <p id ="showid" style="display: inline;margin-left: 5px;">  <script>showid();</script></p> </div>
        <div style="margin-top: 13px;"> <img src="images/post.png" style="height:25px;width:25px;"> <p id ="fullname" style="display: inline;margin-left: 5px;"> <script>showInfo();</script></p> </div>
        <div style="margin-top: 13px;"> <img src="images/birthday.png" style="height:20px;width:20px;"> <p id ="birthday1" style="display: inline;margin-left: 5px;"> </p> </div>
        <div style="margin-top: 13px;margin-bottom: 20px;"> <img src="images/gender2.png" style="height:23px;width:23px;"> <p id ="gender" style="display: inline;margin-left: 5px;"> </p> </div>
        </div>
      </div>
      <br>
      
      <!-- Accordion -->
      <div class="w3-card w3-round">
        <div class="w3-white">

          <button onclick="myFunction('Demo1')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i style="margin-right: 10px;"><img src="images/amis.png" style="height:21px;width:21px"></i> My Followed</button>
          <div id="Demo1" class="w3-hide w3-container">
            <p id="showfollow"><script>showfollow();</script></p>
          </div>

          <button onclick="myFunction('Demo2')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i style="margin-right: 10px;"><img src="images/addfollow2.png" style="height:21px;width:21px"></i> Add a Followed</button>
          <div id="Demo2" class="w3-hide w3-container">            
              <input align="center" type="text" class="w3-card" name="addfollowed" style="margin-top: 15px;width: 100%;border-radius: 10px; border: none;" placeholder="Enter an ID" id="addfollow" required><br/>
              <input align="center" type="button" style="margin-top: 10px;border-radius: 20px;width: 120px;margin-bottom: 5px;margin-left: 95px;" class="w3-button w3-theme w3-center" name="addfollowed" value="Add" id="" onclick="addfollow();" /><br/>           
              <p id="followadded"></p> <br/>   
          </div>

          <button onclick="myFunction('Demo3')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i style="margin-right: 10px;"><img src="images/group.png" style="height:21px;width:21px"> </i> My Groups</button>
          <div id="Demo3" class="w3-hide w3-container">
            <p id="showgroups"><script>showgroups();</script></p>
          </div>

          <button onclick="myFunction('Demo4')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i style="margin-right: 10px;"><img src="images/creategroup.png" style="height:21px;width:21px"></i> Create a group</button>
          <div id="Demo4" class="w3-hide w3-container">            
              <input align="center" type="text" class="w3-card" name="creategroup" maxlength="20" style="margin-top: 15px;width: 100%;border-radius: 10px; border: none;" placeholder="Choose a name" id="groupname" required><br/>
              <input align="center" type="button" style="margin-top: 10px;border-radius: 20px;width: 120px;margin-bottom: 5px;margin-left: 95px;" class="w3-button w3-theme w3-center" name="creategroup" value="Create" id="creategroup" onclick="creategroup();" /><br/>           
              <p id="groupkey"></p> <br/>   
          </div>

          <button onclick="myFunction('Demo5')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i style="margin-right: 10px;"><img src="images/addgroup2.png" style="height:24px;width:24px"></i> Add an existing group</button>
          <div id="Demo5" class="w3-hide w3-container">            
              <input align="center" type="text" class="w3-card" name="addgroup" maxlength="30" style="margin-top: 15px;width: 100%;border-radius: 10px; border: none;" placeholder="Enter the group name" id="addgroupname" required><br/>
              <input align="center" type="text" class="w3-card" name="addgroup" style="margin-top: 15px;width: 100%;border-radius: 10px; border: none;" placeholder="Enter the group key" id="addgroupkey" required><br/>
              <input align="center" type="text" class="w3-card" name="addgroup" style="margin-top: 15px;width: 100%;border-radius: 10px; border: none;" placeholder="Enter ID of owner" id="addidowner" required><br/>
              <input align="center" type="button" style="margin-top: 10px;border-radius: 20px;width: 120px;margin-bottom: 5px;margin-left: 95px;" class="w3-button w3-theme w3-center" name="addgroup" value="Add" onclick="addgroup();" /><br/>           
              <p id="groupadded"></p> <br/>   
          </div>

          <button onclick="myFunction('Demo6')" class="w3-button w3-block w3-theme-l1 w3-left-align"><i style="margin-right: 10px;"><img src="images/img.png" style="height:20px;width:20px"> </i> My Photos</button>
          <div id="Demo6" class="w3-hide w3-container"> 
         <div class="w3-row-padding">
         <br>
           <div class="w3-half">
             <img src="images/lights.jpg" style="width:100%" class="w3-margin-bottom">
           </div>
           <div class="w3-half">
             <img src="images/nature.jpg" style="width:100%" class="w3-margin-bottom">
           </div>
           <div class="w3-half">
             <img src="images/mountains.jpg" style="width:100%" class="w3-margin-bottom">
           </div>
           <div class="w3-half">
             <img src="images/forest.jpg" style="width:100%" class="w3-margin-bottom">
           </div>
           <div class="w3-half">
             <img src="images/nature.jpg" style="width:100%" class="w3-margin-bottom">
           </div>
           <div class="w3-half">
             <img src="images/snow.jpg" style="width:100%" class="w3-margin-bottom">
           </div>
         </div>
          </div>

        </div>      
      </div>
      <br>
      
      <!-- Interests 
      <div class="w3-card w3-round w3-white w3-hide-small">
        <div class="w3-container">
          <p>Réservé...<br>...............</p>
          <p>

          </p>
        </div>
      </div>--> 
      <br>
      
      <!-- Alert Box -->
      <div class="w3-container w3-display-container w3-round w3-theme-l4 w3-border w3-theme-border w3-margin-bottom w3-hide-small">
        <span onclick="this.parentElement.style.display='none'" class="w3-button w3-theme-l3 w3-display-topright">
          <i><img src="images/x.png" style="height:10px;width:10px"></i>
        </span>
        <p><strong>Hey!</strong></p>
        <p>People are looking at your profile. Publish some interesting content</p>
      </div>
    
    <!-- End Left Column -->
    </div>
    
    <!-- Middle Column -->
    <div class="w3-col m7">
    
      <div class="w3-row-padding">
        <div class="w3-col m12">
          <div class="w3-card w3-round w3-white">
            <div class="w3-container w3-padding">
              <h6 id="test1" class="w3-opacity">Publish some text to a group</h6>

                    <div class="form-group purple-border" >
                        <textarea style="margin-bottom: 5px; resize: none;border-radius: 10px; border: none; width: 100%" class="w3-card" align="center" type="text" name="post" id="postshare" rows="3" cols="88" required="required"></textarea>
                        <br>
                        <input align="center" type="text" class="w3-card" name="" maxlength="40" style="margin-top: 15px;width: 90%;border-radius: 10px; border: none;" placeholder="Enter the group name" id="group" required>
                </br>
              <button type="button" style="margin-top: 5px;border-radius: 5px;" class="w3-button w3-theme" name="post" id="share" onclick="share();"><i><img src="images/post.png" style="height:21px;width:21px"></i>  Post</button> 
                    </div><!-- end form-group -->




            </div>
          </div>
        </div>
      </div>
      

      <div id="pubs">
        
      </div>

       <!-- 
      <div class="w3-container w3-card w3-white w3-round w3-margin"><br>
        <img src="images/avatar3.png" alt="Avatar" class="w3-left w3-circle w3-margin-right" style="width:60px">
        <span class="w3-right w3-opacity">16 min</span>
        <h4>ZAIDI Yahia</h4><br>
        <hr class="w3-clear">
        <p>Ceci est notre projet de réseau social décentralisé basé sur la technologie Blockchain, sur la platforme Blockstack !</p>
        <button type="button" class="w3-button w3-theme-d1 w3-margin-bottom"><i><img src="images/like.png" style="height:21px;width:21px"></i>  Like</button> 
        <button type="button" class="w3-button w3-theme-d2 w3-margin-bottom"><i><img src="images/comment.png" style="height:21px;width:21px"></i>  Comment</button> 
      </div>  
     
      <div class="w3-container w3-card w3-white w3-round w3-margin"><br>
        <img src="images/avatar3.png" alt="Avatar" class="w3-left w3-circle w3-margin-right" style="width:60px">
        <span class="w3-right w3-opacity">2 min</span>
        <h4>ZAIDI Yahia</h4><br>
        <hr class="w3-clear">
        <p id="pubcontent"><script>pubcontent();</script></p>
        <button type="button" class="w3-button w3-theme-d1 w3-margin-bottom"><i><img src="images/like.png" style="height:21px;width:21px"></i>  Like</button> 
        <button type="button" class="w3-button w3-theme-d2 w3-margin-bottom"><i><img src="images/comment.png" style="height:21px;width:21px"></i>  Comment</button> 
      </div> -->
    <!-- End Middle Column -->
  </div>
     


      
    
    
    <!-- Right Column -->

    <!-- Navbar on small screens -->
    <div class="w3-col m2">

      <!--
      <div class="w3-card w3-round w3-white w3-center">
        <div class="w3-container">
          <p>Upcoming Events:</p>
          <img src="images/forest.jpg" alt="Forest" style="width:100%;">
          <p><strong>Holiday</strong></p>
          <p>Friday 15:00</p>
          <p><button class="w3-button w3-block w3-theme-l4">Info</button></p>
        </div>
      </div>
      <br>
      
      <div class="w3-card w3-round w3-white w3-center">
        <div class="w3-container">
          <p>Friend Request</p>
          <img src="images/avatar6.png" alt="Avatar" style="width:50%"><br>
          <span>Jane Doe</span>
          <div class="w3-row w3-opacity">
            <div class="w3-half">
              <button class="w3-button w3-block w3-green w3-section" title="Accept"><i class="fa fa-check"></i></button>
            </div>
            <div class="w3-half">
              <button class="w3-button w3-block w3-red w3-section" title="Decline"><i class="fa fa-remove"></i></button>
            </div>
          </div>
        </div>
      </div>
      <br>

      -->
      
      <div class="w3-card w3-round w3-white w3-padding-16 w3-center">
        <p>Show other content</p>
        <input align="center" type="text" class="w3-card" name="" maxlength="40" style="margin-top: 15px;width: 90%;border-radius: 10px; border: none;" placeholder="Enter ID.." id="idother" required><br/>
        <input align="center" type="button" style="margin-top: 10px;border-radius: 20px;width: 120px;margin-bottom: 5px;margin-left: 8px;" class="w3-button w3-theme w3-center" name="" value="Show" id="" onclick="othercontent();" /><br/>   
      </div>
      <br>
      
      <div class="w3-card w3-round w3-white w3-padding-16 w3-center">
        <p>Show a group content</p>
        <input align="center" type="text" class="w3-card" name="" maxlength="20" style="margin-top: 15px;width: 90%;border-radius: 10px; border: none;" placeholder="Enter a group name.." id="" required><br/>
        <input align="center" type="button" style="margin-top: 10px;border-radius: 20px;width: 120px;margin-bottom: 5px;margin-left: 8px;" class="w3-button w3-theme w3-center" name="" value="Show" id="" onclick="" /><br/>   
      </div>
      
    <!-- End Right Column -->
    </div>
    
  <!-- End Grid -->
  </div>
  
<!-- End Page Container -->
</div>
<br>

<!-- Footer -->
<footer class="w3-container w3-theme-d3 w3-padding-16">
  <h5>Contact...</h5>
</footer>

<footer class="w3-container w3-theme-d5">
  <p>Whisper Application Copyright &copy; 2020, All Rights Reserved.</p>
</footer>
 
<script>
// Accordion
function myFunction(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-theme-d1";
    } else { 
        x.className = x.className.replace("w3-show", "");
        x.previousElementSibling.className = 
        x.previousElementSibling.className.replace(" w3-theme-d1", "");
    }
}

// Used to toggle the menu on smaller screens when clicking on the menu button
function openNav() {
    var x = document.getElementById("navDemo");
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else { 
        x.className = x.className.replace(" w3-show", "");
    }
}
</script>

</body>
</html> 
